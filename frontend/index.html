<!DOCTYPE html>
<html>
<head>
  <title>TSP Route Optimizer</title>
  <meta charset="UTF-8">
</head>
<body>
  <h2>Enter Locations (comma-separated)</h2>
  <textarea id="locations" rows="2" cols="50">A,B,C,D</textarea><br><br>

  <h2>Enter Distance Matrix (one row per line, CSV)</h2>
  <textarea id="distances" rows="6" cols="50">0,10,15,20
10,0,35,25
15,35,0,30
20,25,30,0</textarea><br><br>

  <button onclick="getRoute()">Get Optimal Route</button>

  <h3>Result:</h3>
  <pre id="result">Waiting for input...</pre>

  <script>
    async function getRoute() {
      const locations = document.getElementById("locations").value.split(",").map(s => s.trim());
      const distanceStr = document.getElementById("distances").value.trim().split("\n");
      const distances = distanceStr.map(row => row.split(",").map(Number));

      const res = await fetch("https://tsp-optimizer-production.up.railway.app/optimize-route", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ locations, distances })
      });

      const data = await res.json();
      document.getElementById("result").innerText =
        `Optimal Route: ${data.route.join(" â†’ ")}\nTotal Cost: ${data.cost}`;
    }
  </script>
</body>
</html>